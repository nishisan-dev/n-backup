# NBackup Server — Exemplo de Configuração
# Copie para /etc/nbackup/server.yaml e ajuste os valores.

server:
  listen: "0.0.0.0:9847"

tls:
  ca_cert: /etc/nbackup/ca.pem
  server_cert: /etc/nbackup/server.pem
  server_key: /etc/nbackup/server-key.pem

storages:
  scripts:
    base_dir: /var/backups/scripts
    max_backups: 5
    assembler_mode: eager             # eager|lazy (default: eager)
    assembler_pending_mem_limit: 8mb  # limite de pending em memória no modo eager

  home-dirs:
    base_dir: /var/backups/home
    max_backups: 10
    assembler_mode: lazy
    assembler_pending_mem_limit: 8mb

logging:
  level: info                      # debug, info, warn, error
  format: json                     # json, text
  file: /var/log/nbackup/server.log # Log file dedicado (opcional)
  stream_stats: false              # Per-stream stats em sessões paralelas (padrão: false)
